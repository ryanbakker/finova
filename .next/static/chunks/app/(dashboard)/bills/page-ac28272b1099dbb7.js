(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[811],{26859:(e,t,l)=>{"use strict";l.d(t,{K:()=>a});var s=l(54281);let a=()=>{let[e,t]=(0,s.useState)({}),l=(0,s.useCallback)(e=>{t(t=>{let l=t[e],s={};return Object.keys(t).forEach(t=>{t!==e&&(s[t]=!1)}),s[e]="asc"===l?"desc":"desc"!==l&&"asc",s})},[]),a=(0,s.useCallback)(t=>e[t]||!1,[e]);return{sortStates:e,toggleSorting:l,getSortState:a,clearAllSorting:(0,s.useCallback)(()=>{t({})},[])}}},28739:(e,t,l)=>{"use strict";l.d(t,{A:()=>s});let s=(0,l(71861).A)("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},33128:(e,t,l)=>{"use strict";l.d(t,{m:()=>r});var s=l(90013),a=l(44832);function r(){return(0,s.jsx)("footer",{className:"border-t bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,s.jsxs)("div",{className:"mx-auto flex flex-col items-center justify-between gap-4 py-6 md:h-10 !pt-5 md:flex-row md:py-0 max-w-7xl",children:[(0,s.jsx)("div",{className:"flex flex-col items-center gap-4 px-8 md:flex-row md:gap-2 md:px-0",children:(0,s.jsx)("p",{className:"text-center text-sm leading-loose text-muted-foreground md:text-left",children:"\xa9 2025 Finova. All rights reserved."})}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,s.jsx)("span",{children:"Made with"}),(0,s.jsx)(a.A,{className:"h-4 w-4 text-red-500",fill:"red"})]})]})})}},49898:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>O});var s=l(90013),a=l(33128),r=l(91784),n=l(61488),o=l(93508),i=l(661),d=l(56804),c=l(78757),u=l(54281),g=l(30363),m=l(10213),x=l(30509),h=l(83409),b=l(83320),p=l(7532),f=l(55050),j=l(57391),w=l(82825),v=l(87725);let y=null,N=e=>{let{columnId:t,sortState:l,onToggleSort:a,children:n,className:o=""}=e;return(0,s.jsxs)(r.$,{variant:"ghost",onClick:()=>a(t),className:"h-auto p-0 py-2 font-semibold hover:bg-slate-100 dark:hover:bg-slate-800 cursor-pointer ".concat(l?"table-header-sorted":""," ").concat(o),children:[n,"asc"===l?(0,s.jsx)(h.A,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}):"desc"===l?(0,s.jsx)(b.A,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}):(0,s.jsx)(p.A,{className:"h-4 w-4 text-slate-400"})]})},k=e=>{let t=new Date;return Math.ceil((new Date(e).getTime()-t.getTime())/864e5)};var S=l(10983),C=l(63715),D=l(23195),M=l(1014),R=l(8923),A=l(25652),F=l(37198),P=l(89333);l(87498),l(69479);var E=l(86730);function I(e){var t;let{columns:l,data:a,isLoading:n=!1,sortStates:g,onRefresh:m}=e,[x,h]=(0,u.useState)(1),[b,p]=(0,u.useState)({}),[f,j]=(0,u.useState)({}),[w,v]=(0,u.useState)([]),[N,k]=(0,u.useState)(null),[A,P]=(0,u.useState)(!1),[I,H]=(0,u.useState)(!1),[T,B]=(0,u.useState)(!1),K=(0,S.useSearchParams)(),O=(0,C.a)(),V=K.get("name")||"",_=K.get("dateFrom"),$=K.get("dateTo"),z=K.get("category")||"all",L=K.get("status")||"all",U=K.get("recurring")||"all";(0,u.useEffect)(()=>{O?p({select:!0,name:!0,amount:!0,dueDate:!0,category:!1,status:!1,isRecurring:!1,actions:!0}):p({select:!0,name:!0,amount:!0,dueDate:!0,category:!0,status:!0,isRecurring:!0,actions:!0})},[O]);let q=e=>{k(e),P(!0)},W=e=>{k(e),H(!0)},Y=e=>{k(e),B(!0)};(0,u.useEffect)(()=>{y={onView:q,onEdit:W,onDelete:Y}},[]);let G=(0,u.useMemo)(()=>{let e=a;if(V&&(e=e.filter(e=>e.name.toLowerCase().includes(V.toLowerCase()))),_&&$){let t=new Date(_),l=new Date($);e=e.filter(e=>{let s=new Date(e.dueDate);return s>=t&&s<=l})}if("all"!==z&&(e=e.filter(e=>e.category===z)),"all"!==L&&(e=e.filter(e=>e.status===L)),"all"!==U&&(e=e.filter(e=>"yes"===U?!0===e.isRecurring:!1===e.isRecurring)),g){let t=Object.entries(g).find(e=>{let[,t]=e;return!1!==t});if(t){let[l,s]=t;e=[...e].sort((e,t)=>{let a=e[l],r=t[l];return("dueDate"===l&&(a=new Date(a).getTime(),r=new Date(r).getTime()),"amount"===l&&(a=Number(a),r=Number(r)),"isRecurring"===l&&(a=+!!a,r=+!!r),"string"==typeof a&&(a=a.toLowerCase(),r=r.toLowerCase()),"asc"===s)?a<r?-1:+(a>r):a>r?-1:+(a<r)})}}return e},[a,V,_,$,z,L,U,g]),Q=(0,i.N4)({data:G,columns:l,getCoreRowModel:(0,d.HT)(),getPaginationRowModel:(0,d.kW)(),getFilteredRowModel:(0,d.hM)(),onColumnVisibilityChange:p,onRowSelectionChange:j,onColumnFiltersChange:e=>{v(e),h(1)},state:{pagination:{pageIndex:x-1,pageSize:20},columnVisibility:b,rowSelection:f,columnFilters:w},initialState:{columnVisibility:b},onPaginationChange:e=>{"function"==typeof e&&h(e({pageIndex:x-1,pageSize:20}).pageIndex+1)}}),X=Q.getFilteredSelectedRowModel().rows.length,Z=Math.ceil(Q.getFilteredRowModel().rows.length/20);(0,u.useEffect)(()=>{x>Z&&Z>0&&h(1)},[Z,x]);let J=e=>{h(e),Q.setPageIndex(e-1)};return n||!a||0===a.length?(0,s.jsx)(E.$,{rowCount:8,isMobile:O}):(0,s.jsxs)("div",{className:"w-full space-y-4",children:[(0,s.jsx)(F.BillFilters,{table:Q}),X>0&&(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-lg",children:[(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsxs)("span",{className:"text-sm font-medium text-red-700 dark:text-red-300",children:[X," bill",1===X?"":"s"," selected:"]})}),(0,s.jsxs)(r.$,{variant:"destructive",size:"sm",onClick:()=>{let e=Q.getFilteredSelectedRowModel().rows.map(e=>e.original);if(0===e.length)return;let t=1===e.length?'Are you sure you want to delete the bill "'.concat(e[0].name,'"?'):"Are you sure you want to delete ".concat(e.length," selected bills?");window.confirm(t)&&(console.log("Deleting bills:",e),j({}))},className:"bg-red-600 hover:bg-red-700 dark:bg-red-600 dark:hover:bg-red-700",children:[(0,s.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Delete"]})]}),(0,s.jsx)("div",{className:"overflow-hidden rounded-md border w-full bg-neutral-50 dark:bg-neutral-900 shadow-sm",children:(0,s.jsxs)(o.XI,{className:"w-full ".concat(O?"text-sm":""),children:[(0,s.jsx)(o.A0,{className:"text-semibold !bg-white hover:!bg-white dark:!bg-neutral-950 dark:hover:!bg-neutral-950 rounded-t-lg",children:Q.getHeaderGroups().map(e=>(0,s.jsx)(o.Hj,{className:"hover:!bg-white dark:hover:!bg-white",children:e.headers.map(e=>(0,s.jsx)(o.nd,{className:"ml-0 ".concat("select"===e.id?"pl-2":"pl-0"," ").concat(O?"py-1 px-2 text-sm":"py-2 text-base"),children:e.isPlaceholder?null:(0,i.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,s.jsx)(o.BF,{children:(null==(t=Q.getRowModel().rows)?void 0:t.length)?Q.getRowModel().rows.map(e=>(0,s.jsx)(o.Hj,{"data-state":e.getIsSelected()&&"selected",className:"cursor-pointer hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors group",onClick:t=>{t.target instanceof Element&&(t.target.closest('[data-action="button"]')||t.target.closest('input[type="checkbox"]'))||q(e.original)},children:e.getVisibleCells().map(e=>(0,s.jsx)(o.nA,{className:"text-left group-hover:bg-slate-50 dark:group-hover:bg-slate-800/30 ".concat(O?"py-1":"py-2"," ").concat("actions"!==e.column.id?"pl-2":""),children:(0,i.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,s.jsx)(o.Hj,{children:(0,s.jsx)(o.nA,{colSpan:l.length,className:"h-24 text-center",children:0===G.length&&a.length>0?"No results found for your search criteria.":"No bills available."})})})]})}),O&&(0,s.jsx)("div",{className:"text-xs text-muted-foreground text-center py-2",children:"\uD83D\uDCA1 Swipe to see more details â€¢ Tap row to view full bill"}),Z>1&&(0,s.jsxs)("div",{className:"flex items-center justify-between space-x-2 py-0",children:[(0,s.jsxs)("div",{className:"text-muted-foreground flex-1 text-sm",children:[Q.getFilteredSelectedRowModel().rows.length," of"," ",Q.getFilteredRowModel().rows.length," row(s) selected."]}),(0,s.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,s.jsxs)("div",{className:"text-sm text-muted-foreground whitespace-nowrap",children:["Showing ",(x-1)*20+1," to"," ",Math.min(20*x,Q.getFilteredRowModel().rows.length)," ","of ",Q.getFilteredRowModel().rows.length," results"]}),(0,s.jsxs)("div",{className:"space-x-2",children:[(0,s.jsx)(r.$,{variant:"outline",size:"sm",onClick:()=>J(Math.max(1,x-1)),disabled:1===x,className:"enabled:cursor-pointer",children:"Previous"}),(0,s.jsx)(r.$,{variant:"outline",className:"enabled:cursor-pointer",size:"sm",onClick:()=>J(Math.min(Z,x+1)),disabled:x===Z,children:"Next"})]})]})]}),Z<=1&&(0,s.jsxs)("div",{className:"flex items-center justify-between space-x-2 py-4",children:[(0,s.jsxs)("div",{className:"text-muted-foreground flex-1 text-sm",children:[Q.getFilteredSelectedRowModel().rows.length," of"," ",Q.getFilteredRowModel().rows.length," row(s) selected."]}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground whitespace-nowrap",children:["Found ",Q.getFilteredRowModel().rows.length," results"]})]}),(0,s.jsx)(D.BillDetailsDialog,{bill:N,isOpen:A,onClose:()=>{P(!1),k(null)}}),(0,s.jsx)(M.EditBillDialog,{bill:N,isOpen:I,onClose:()=>H(!1),onSave:e=>{H(!1),k(null),m&&m()},accounts:[]}),(0,s.jsx)(R.DeleteBillDialog,{bill:N,isOpen:T,onClose:()=>B(!1),onConfirm:e=>{B(!1),k(null),m&&m()}})]})}var H=l(26859),T=l(7413);let B=(0,T.createServerReference)("007f56029dc8ee169b34186f1c16953b8669b27b85",T.callServer,void 0,T.findSourceMapURL,"getUserBills");var K=l(42831);let O=function(){let[e,t]=(0,u.useState)([]),[l,o]=(0,u.useState)(!0),[i,d]=(0,u.useState)(!1),{sortStates:h,toggleSorting:b}=(0,H.K)(),p=[{id:"select",header:e=>{let{table:t}=e;return(0,s.jsx)(g.S,{className:"ml-1",checked:t.getIsAllPageRowsSelected()||t.getIsSomePageRowsSelected()&&"indeterminate",onCheckedChange:e=>t.toggleAllPageRowsSelected(!!e),"aria-label":"Select all",onClick:e=>e.stopPropagation()})},cell:e=>{let{row:t}=e;return(0,s.jsx)(g.S,{className:"ml-1",checked:t.getIsSelected(),onCheckedChange:e=>t.toggleSelected(!!e),"aria-label":"Select row",onClick:e=>e.stopPropagation()})},enableSorting:!1,enableHiding:!1},{accessorKey:"name",header:()=>(0,s.jsx)(N,{columnId:"name",sortState:h.name||!1,onToggleSort:b,children:"Bill Name"}),enableHiding:!0,cell:e=>{let{row:t}=e,l=t.original,a=(0,x.fW)(l.category);return(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"p-1 rounded-lg bg-muted",children:a?(0,s.jsx)(a,{className:"h-4 w-4"}):(0,s.jsx)("span",{className:"text-muted-foreground text-sm",children:"\uD83D\uDCC4"})}),(0,s.jsx)("span",{className:"font-medium",children:l.name})]})}},{accessorKey:"amount",header:()=>(0,s.jsx)(N,{columnId:"amount",sortState:h.amount||!1,onToggleSort:b,children:"Amount"}),enableHiding:!0,cell:e=>{let{row:t}=e,l=t.getValue("amount");return new Intl.NumberFormat("en-AU",{style:"currency",currency:"AUD",minimumFractionDigits:2,maximumFractionDigits:2}).format(l)}},{accessorKey:"dueDate",header:()=>(0,s.jsx)(N,{columnId:"dueDate",sortState:h.dueDate||!1,onToggleSort:b,children:"Due Date"}),enableHiding:!0,cell:e=>{let{row:t}=e,l=t.getValue("dueDate"),a=k(l);return(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(f.A,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:(e=>{let t=new Date(e),l=t.getDate().toString().padStart(2,"0"),s=(t.getMonth()+1).toString().padStart(2,"0"),a=t.getFullYear().toString().slice(-2);return"".concat(l,"/").concat(s,"/").concat(a)})(l)}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:a<0?"".concat(Math.abs(a)," days overdue"):0===a?"Due today":"".concat(a," days left")})]})]})}},{accessorKey:"category",header:()=>(0,s.jsx)(N,{columnId:"category",sortState:h.category||!1,onToggleSort:b,children:"Category"}),enableHiding:!0,cell:e=>{let{row:t}=e,l=t.getValue("category");return(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-slate-100 text-slate-800 dark:bg-slate-800 dark:text-slate-300 rounded-full",children:l})}},{accessorKey:"status",header:()=>(0,s.jsx)(N,{columnId:"status",sortState:h.status||!1,onToggleSort:b,children:"Status"}),enableHiding:!0,cell:e=>{let{row:t}=e;var l=t.original;let a=k(l.dueDate);return"paid"===l.status?(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400 rounded-full",children:"Paid"}):a<0?(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400 rounded-full",children:"Overdue"}):a<=7?(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400 rounded-full",children:"Due Soon"}):(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400 rounded-full",children:"Upcoming"})}},{accessorKey:"isRecurring",header:()=>(0,s.jsx)(N,{columnId:"isRecurring",sortState:h.isRecurring||!1,onToggleSort:b,children:"Recurring"}),enableHiding:!0,cell:e=>{let{row:t}=e,l=t.getValue("isRecurring");return(0,s.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(l?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300"),children:l?"Yes":"No"})}},{id:"actions",enableHiding:!1,cell:e=>{let{row:t}=e,l=t.original;return(0,s.jsxs)(m.rI,{children:[(0,s.jsx)(m.ty,{asChild:!0,className:"cursor-pointer",children:(0,s.jsxs)(r.$,{variant:"ghost",className:"h-8 w-8 p-0","data-action":"button",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,s.jsx)(j.A,{className:"h-4 w-4"})]})}),(0,s.jsxs)(m.SQ,{align:"end",className:"space-y-1",children:[(0,s.jsxs)(m._2,{className:"cursor-pointer","data-action":"button",onClick:()=>null==y?void 0:y.onView(l),children:[(0,s.jsx)(w.A,{className:"mr-2 h-4 w-4"}),"View details"]}),(0,s.jsxs)(m._2,{className:"cursor-pointer","data-action":"button",onClick:()=>null==y?void 0:y.onEdit(l),children:[(0,s.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,s.jsxs)(m._2,{className:"dark:bg-red-900/40 bg-red-600/20 text-red-500 font-medium dark:hover:bg-red-700/40 dark:hover:text-red-500 cursor-pointer hover:!bg-red-500/50 hover:!text-red-500 transition-all","data-action":"button",onClick:()=>null==y?void 0:y.onDelete(l),children:[(0,s.jsx)(c.A,{className:"mr-2 h-4 w-4 text-red-500"}),"Delete"]})]})]})}}];(0,u.useEffect)(()=>{(async()=>{try{let e=await B();t(e||[])}catch(e){console.error("Error fetching bills:",e),(0,K.oR)({title:"Error",description:"Failed to fetch bills. Please try again.",variant:"destructive"})}finally{o(!1)}})()},[]);let S=async()=>{try{let e=await B();t(e||[])}catch(e){console.error("Error refreshing bills:",e),(0,K.oR)({title:"Error",description:"Failed to refresh bills. Please try again.",variant:"destructive"})}};return l?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(P.BillPageSkeleton,{}),(0,s.jsx)(a.m,{})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-end justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Bills"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Manage recurring bills, track due dates, and monitor your payment obligations to stay on top of your finances."})]}),(0,s.jsxs)(r.$,{className:"button-blue-bg hover:cursor-pointer",onClick:()=>d(!0),children:[(0,s.jsx)(n.A,{className:"mr-1 h-4 w-4"}),"Add Bill"]})]}),(0,s.jsx)(u.Suspense,{fallback:(0,s.jsx)(P.BillPageSkeleton,{}),children:(0,s.jsx)(I,{columns:p,data:e,isLoading:l,sortStates:h,onRefresh:S})}),(0,s.jsx)(a.m,{}),(0,s.jsx)(A.CreateBillDialog,{isOpen:i,onClose:()=>d(!1),onSuccess:S})]})}},81854:(e,t,l)=>{Promise.resolve().then(l.bind(l,49898))}},e=>{e.O(0,[6251,6960,4463,7038,8301,9256,1278,2615,5858,882,3804,9170,6010,1,6540,7358],()=>e(e.s=81854)),_N_E=e.O()}]);